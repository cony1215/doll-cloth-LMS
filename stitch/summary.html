<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ç¸«ç·šæ¨¡æ“¬</title>
  <style>
    body {
      font-family: sans-serif;
      background: #fffbe6;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    #clothingArea {
      position: relative;
      width: 300px;
      height: 330px;
      margin: 0 auto;
      background: center/contain no-repeat;
    }
    #arrow {
      position: absolute;
      width: 60px;
      height: 60px;
      background: url('Images/arrow.png') center/contain no-repeat;
      display: none;
      transform-origin: center;
    }
    #options {
      margin-top: 8px;
    }
    button {
      margin: 0 10px;
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      background: #f98;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    #feedback {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }
    #completeBox {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 2px solid #f98;
      border-radius: 12px;
      padding: 20px 30px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      z-index: 1000;
    }
    #completeBox p {
      font-size: 18px;
      margin-bottom: 20px;
    }
    #completeBox button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background-color: #f98;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>è«‹é¸æ“‡ç®­é ­æ‰€æŒ‡å¼•çš„ç¸«ç·šé©åˆä»€éº¼é‡æ³•</h1>

<div id="clothingArea">
  <div id="arrow"></div>
</div>

<div id="options">
  <button onclick="selectStitch('æ²é‡ç¸«')">æ²é‡ç¸«</button>
  <button onclick="selectStitch('å›é‡ç¸«')">å›é‡ç¸«</button>
  <button onclick="selectStitch('è—é‡ç¸«')">è—é‡ç¸«</button>
</div>

<div id="feedback"></div>

<div id="completeBox">
  <p>ğŸ‰ æ‰€æœ‰ç¸«ç·šå®Œæˆï¼<br>æ˜¯å¦è¿”å›é¸æ“‡é ï¼Ÿ</p>
  <button onclick="goBackToChoose()">æ˜¯</button>
</div>

<script>
function getQueryParam(param) {
  const params = new URLSearchParams(window.location.search);
  return params.get(param);
}

// è³‡æ–™å®šç¾©
const data = {
  "T-shirt": {
    image: "Images/T-shirt.png",
    steps: [
      { correct: "å›é‡ç¸«", text: "é€™æ˜¯è‚©ç·šï¼Œä½¿ç”¨å›é‡ç¸«è¼ƒå …å›º", arrow: { top: 20, left: 200, angle: 210 } },
      { correct: "è—é‡ç¸«", text: "é€™æ˜¯é ˜å£ï¼Œä½¿ç”¨è—é‡ç¸«éš±è—ç¸«ç·š", arrow: { top: 100, left: 118, angle: 0 } },
      { correct: "æ²é‡ç¸«", text: "é€™æ˜¯è¢–å£èˆ‡ä¸‹æ“ºæŠ˜é‚Šï¼Œä½¿ç”¨æ²é‡ç¸«å¿«é€Ÿä¹¾æ·¨", arrow: { top: 230, left: 30, angle: 90 } }
    ]
  },
  "çŸ­è¤²": {
    image: "Images/short.png",
    steps: [
      { correct: "å›é‡ç¸«", text: "èƒ¯ä¸‹ç¸«åˆï¼Œä½¿ç”¨å›é‡ç¸«é©åˆæ‰¿å—æ‹‰æ‰¯", arrow: { top: 150, left: 150, angle: 230 } },
      { correct: "è—é‡ç¸«", text: "è…°é ­æ¥åˆè™•ç”¨è—é‡ç¸«å°å£", arrow: { top: 0, left: 150, angle: 180 } },
	  { correct: "æ²é‡ç¸«", text: "è¤²ç®¡ä¸‹æ“ºç”¨æ²é‡ç¸«å¿«é€Ÿå®Œæˆ", arrow: { top: 250, left: 270, angle: 315 } },
	  { correct: "å›é‡ç¸«", text: "å£è¢‹ä½¿ç”¨å›é‡ç¸«ç¢ºä¿ç‰¢é ", arrow: { top: 55, left: 20, angle: 135 } }
    ]
  }
};

const style = getQueryParam("style") || "T-shirt";
const steps = data[style]?.steps || data["T-shirt"].steps;
let currentStep = 0;

document.getElementById("clothingArea").style.backgroundImage = `url('${data[style]?.image || "images/T-shirt.png"}')`;

function showArrow(stepIndex) {
  const arrow = document.getElementById('arrow');
  const step = steps[stepIndex].arrow;
  arrow.style.top = `${step.top}px`;
  arrow.style.left = `${step.left}px`;
  arrow.style.transform = `rotate(${step.angle}deg)`;
  arrow.style.display = 'block';
}

function selectStitch(choice) {
  const feedback = document.getElementById('feedback');
  const stepData = steps[currentStep];

  if (choice === stepData.correct) {
    feedback.textContent = `âœ… æ­£ç¢ºï¼${stepData.text}`;
    currentStep++;
    if (currentStep < steps.length) {
      setTimeout(() => {
        feedback.textContent = "";
        showArrow(currentStep);
      }, 1000);
    } else {
      setTimeout(() => {
        document.getElementById("arrow").style.display = "none";
        document.getElementById("completeBox").style.display = "block";
      }, 1000);
    }
  } else {
    feedback.textContent = "âŒ ä¸æ˜¯æœ€ä½³é‡æ³•ï¼Œå†è©¦è©¦ï¼";
  }
}

function goBackToChoose() {
  window.location.href = "DollGame.html";
}

// åˆå§‹åŒ–
showArrow(currentStep);
</script>

</body>
</html>
